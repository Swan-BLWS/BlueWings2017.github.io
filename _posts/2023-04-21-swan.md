---
layout: post
title: 'κ°μ²΄μ§€ν–¥ μ„¤κ³„μ 5μ›μΉ™'
author: μ΅°μμ™„
date: 2023-04-21
category: TeamD
icon: java-vertical
image:
keywords: java, SOLID
preview: 0
cs: swan
---

> ## πνΉμ‹λ‚ μλ»λ κ°λ… μ „λ‹¬μ΄ μλ‹¤λ©΄ λ“κΈ€ λ¶€νƒλ“λ¦½λ‹λ‹¤. μ €μ μ„±μ¥μ— ν° λ„μ›€μ΄ λ©λ‹λ‹¤π

* * * * * * * * * * * *

## κ°μ²΄ μ§€ν–¥μ΄λ€?

ν„μ‹¤μ— μ΅΄μ¬ν•λ” μ‚¬λ¬Όμ„ μλ” κ·Έλ€λ΅ κ°μ²΄λ΅ λ¨λΈλ§ν•λ‹¤.
κ°μ²΄μ μ†μ„±κ³Ό ν–‰μ„λ¥Ό μ •μν•κ³ , μ μ°¨κ°€ μ•„λ‹ κ°μ²΄κ°€ μ¤‘μ‹¬μ΄ λμ–΄ μ‹¤μ  μ‚¬λ¬Όμ΄ λ™μ‘ν•λ” λ°©μ‹μΌλ΅ μ„¤κ³„ν•λ” κ²ƒ

## κ°μ²΄ μ„¤κ³„ν•λ” λ°©λ²•.

- κ°μ²΄μ 3κ°€μ§€ μ”μ†

  - μƒνƒ μ μ§€ (κ°μ²΄μ μƒνƒ)

    - κ°μ²΄λ” μƒνƒ μ •λ³΄λ¥Ό μ €μ¥ν•κ³ , μ μ§€λμ–΄μ Έμ•Όν•λ©° μ΄λ¬ν• μ†μ„± (Variable)μ€ λ³€μλ΅ μ •μ λμ–΄μ Έμ•Ό ν•λ‹¤.
    - μ΄λ¬ν• μ†μ„±κ°’μ΄ λ°”λ€μΌλ΅ μΈν•μ—¬, κ°μ²΄μ μƒνƒκ°€ λ³€κ²½λ  μ μμ–΄μ•Ό ν•λ‹¤.

  - κΈ°λ¥ μ κ³µ (κ°μ²΄μ μ±…μ„)

    - κ°μ²΄λ” κΈ°λ¥μ„ μ κ³µν•΄μ•Ό ν•λ‹¤. (Method μ μ κ³µ)
    - μΊ΅μν™”μ™€μ μ—°κ΄€μ΄ μλ”λ°, μ™Έλ¶€λ΅ λ¶€ν„° μ§μ ‘ μ†μ„±μ— μ ‘κ·Όν•μ—¬ λ³€κ²½ν•λ” κ²ƒμ΄ μ•„λ‹ κ°μ²΄κ°€ μ κ³µν•λ” Methodλ΅ μ†μ„±μ΄ λ³€κ²½λλ” κΈ°λ¥μ΄ μ κ³µλμ–΄μ Έμ•Ό ν•λ‹¤.

  - κ³ μ  μ‹λ³„μ μ κ³µ (κ°μ²΄μ μ μΌμ„±)
    - κ°κ°μ κ°μ²΄λ” κ³ μ ν• μ‹λ³„μλ¥Ό κ°€μ Έμ•Ό ν•λ‹¤.
    - μ΄ν›„ DBμ—μ„ Unique Key, Primary Key λ΅λ„ μ‘μ„±μ΄ κ°€λ¥ν•λ‹¤.

- λ¬Όλ¦¬ κ°μ²΄μ™€ κ°λ… κ°μ²΄

  - λ¬Όλ¦¬ κ°μ²΄

    - μ‹¤μ λ΅ μ‚¬λ¬Όμ΄ μ΅΄μ¬ν•λ©°, μ΄λ¥Ό ν΄λμ¤λ΅ μ •μν• κ°μ²΄
    - κΈ‰μ—¬ κ΄€λ¦¬ μ‹μ¤ν… : μ§μ›, μ›”κΈ‰ν†µμ¥ λ“±λ“±

  - κ°λ… κ°μ²΄

    - κ°λ°ν• μ›Ή μ‹μ¤ν…μ—μ„ Serviceμ— ν•΄λ‹Ήλλ‹¤.
    - business logicμ„ μ²λ¦¬ν•λ” λ¶€λ¶„μΌλ΅ μ—¬λ¬ κ°μ²΄λ¥Ό μƒνΈμ‘μ© ν•λ„λ΅ ν•λ©°, κ°μ²΄κ°€ μ κ³µν•λ” μ¤νΌλ μ΄μ… methodλ¥Ό ν†µν•μ—¬ κ°μ²΄μ μ†μ„±μ„ λ³€κ²½ μ‹ν‚¨λ‹¤
    - μ‚¬μ©μ κ΄€λ¦¬ μ‹μ¤ν… : μ‚¬μ©μ κ°μ²΄μ λ§μ§€λ§‰ μ ‘μ†μΌμλ¥Ό μ΄μ©ν•μ—¬, κ³„μ • λ§λ£, λΉ„λ°€λ²νΈ μ΄κΈ°ν™”, μ¬λ“±λ΅ μ²λ¦¬ λ“±

  - κ°μ²΄μ§€ν–¥μ—μ„μ λ€λ¶€λ¶„μ ν”„λ΅κ·Έλλ° κ³Όμ •

    - κ° κ°μ²΄μ μ†μ„±κ³Ό κΈ°λ¥μ„ μ •μ β†’ business logicμ„ μ²λ¦¬ν•λ” Serviceμ—μ„ κ°μ²΄μ Methodλ¥Ό μ΄μ©ν•΄ κ°μ²΄μ μ†μ„±μ„ λ³€κ²½ν•λ” μ‘μ—…
    - μ΄λ¬ν• μ‘μ—…μ„ ν•κΈ° μ„ν•΄μ„λ” κ° κ°μ²΄μ μ†μ„±μ„ λ³€κ²½ν•κ±°λ‚ μƒνƒλ¥Ό λ³€κ²½ν•  μ μλ” μ¤νΌλ μ΄μ…(Method)μ„ μ μ •μν•΄μ•Όν•λ‹¤.



* * * * * * * * * * * *

## μ‘μ§‘λ„μ™€ κ²°ν•©λ„

> μΆ‹μ€ μ†ν”„νΈμ›¨μ–΄ μ„¤κ³„λ¥Ό μ„ν•΄μ„λ” κ²°ν•©λ„λ” λ‚®μ¶”κ³  μ‘μ§‘λ„λ” λ†’μ—¬μ•Ό ν•λ‹¤.

#### κ²°ν•©λ„

A,B,C λΌλ” ν΄λμ¤κ°€ μλ‹¤.
Cκ°€ Bλ¥Ό μμ΅΄ν•κ³  Bλ” Aλ¥Ό μμ΅΄ν•λ‹¤.
A<-B<-C μμ΅΄ κ²°ν•©λ„κ°€ μ¬λΌκ°„λ‹¤.
Aν΄λμ¤λ¥Ό μμ •ν•λ©΄ Bλ„ μμ •ν•΄μ•Όν•κ³ , Cλ„ μμ •ν•΄μ•Όν•λ‹¤.
μ΄λ ‡κ² κ²°ν•©λ„κ°€ λ†’μ•„μ§€κ² λλ©΄ ν΄λμ¤κ°„μ μƒνΈ μμ΅΄μ„±μ΄ λ†’μ•„μ Έ κ°μ²΄μ μ¬μ‚¬μ© λ° μ μ§€λ³΄μκ°€ μ–΄λ ¤μ›μ§„λ‹¤.

#### μ‘μ§‘λ„

ν•λ‚μ ν΄λμ¤ λ‚΄λ¶€μ— μ΅΄μ¬ν•λ” κµ¬μ„± μ”μ†λ“¤μ κΈ°λ¥μ  κ΄€λ ¨μ„±μ„ λ§ν•λ‹¤.
μ‘μ§‘λ„κ°€ λ†’μ€ ν΄λμ¤λ” ν•λ‚μ μ±…μ„μ— μ§‘μ¤‘ν•κ³  λ…λ¦½μ„±μ΄ λ†’μ•„μ Έ, μ¬μ‚¬μ© λ° μ μ§€λ³΄μκ°€ μ©μ΄ν•λ‹¤.


* * * * * * * * * * * *

## SOLID : κ°μ²΄ μ§€ν–¥ μ„¤κ³„μ 5μ›μΉ™
### <mark style="background-color: #F9FAC0"> λ‹¨μΌ μ±…μ„ μ›μΉ™(Single Responsibility Principle) </mark>

μ–΄λ– ν• ν΄λμ¤λ¥Ό λ³€κ²½ν•λ” μ΄μ λ” ν•κ°€μ§€ λΏμ΄μ—¬μ•Ό ν•λ‹¤.
μ£Όλ¬Έμ„ μ²λ¦¬ν•λ” ν΄λμ¤κ°€ μλ‹¤.
μ£Όλ¬Έμ΄ μ¬λ°”λ¥΄κ² ν•μ„±λλ©΄, μ£Όλ¬Έμ„ λ°μ΄ν„°λ² μ΄μ¤μ— μ €μ¥ν•κ³  μ£Όλ¬Έμ„ ν™•μΈν•κΈ° μ„ν•΄ μ΄λ©”μΌμ„ λ³΄λ‚Έλ‹¤.

```java
public class OrderProcessor {

    public void process(Order order){
        if (order.isValid() && save(order)) {
            sendConfirmationEmail(order);
        }
    }

    private boolean save(Order order) {
        MySqlConnection connection = new MySqlConnection("database.url");
        return true;
    }

    private void sendConfirmEmail(Order order) {
        String name = order.getCustomerName();
        String email = order.getCustomerEmail();
    }
}
```

μ΄ ν΄λμ¤λ” μ„Έ κ°€μ§€ μ΄μ λ΅ λ³€κ²½λλ‹¤.

1. μ£Όλ¬Έ μ²λ¦¬ λ΅μ§μ λ³€κ²½
2. μ£Όλ¬Έ μ €μ¥ λ°©μ‹(λ°μ΄ν„°λ² μ΄μ¤ μ ν•)μ λ³€κ²½
3. μ£Όλ¬Έ ν™•μΈ μ „μ†΅ λ°©λ²•μ λ³€κ²½. (μ: μ΄λ©”μΌ-> μΉ΄ν†΅ λ©”μ‹μ§€λ¥Ό λ³΄λ‚΄μ•Ό ν•λ‹¤κ³  κ°€μ •)

λ‹¨μΌ μ±…μ„ μ›μΉ™μ€ μ΄ λ¬Έμ μ μ„Έ κ°€μ§€ μΈ΅λ©΄μ΄ μ‹¤μ λ΅ μ„Έ κ°€μ§€ λ‹¤λ¥Έ μ±…μ„μ΄λΌλ” κ²ƒμ„ λ§ν•λ‹¤.
κ·Έλ¬λ―€λ΅ μ„λ΅ λ‹¤λ¥Έ ν΄λμ¤ λλ” ν΄λμ¤μ— μμ–΄μ•Ό ν•λ‹¤.
λ‹¤λ¥Έ μ‹κ°„μ— λ‹¤λ¥Έ μ΄μ λ΅ λ³€κ²½λ  μ μλ” μ—¬λ¬ μ—”ν„°ν‹°λ¥Ό κ²°ν•©ν•λ” κ²ƒμ€ μλ»λ μ„¤κ³„ κ²°μ •μ΄λ‹¤.
ν΄λμ¤λ¥Ό κ°κ° λ‹¨μΌ κΈ°λ¥μ„ μν–‰ν•λ” μ„Έ κ°μ κ°λ³„ ν΄λμ¤λ΅ λ¶„ν• ν•λ” κ²ƒμ΄ ν›¨μ”¬ μΆ‹λ‹¤. (κ° ν΄λμ¤μ μ‘μ§‘λ„λ¥Ό λ†’μ—¬μ¤)

```java
public class MySQLOrderRepository {
    public boolean save(Order order) {
        MySqlConnection connection = new MySqlConnection("database.url");
        // DBμ— μ €μ¥

        return true;
    }
}

public class ConfirmationEconfirmSender {
    public void sendConfirmationMessage(Order order) {
        String name = order.getCustomerName();
        String email = order.getCustomerEmail();

        // μ΄λ©”μΌ μ „μ†΅
    }
}

public class OrderProcessor {
    public void process(Order order){

        MySQLOrderRepository repository = new MySQLOrderRepository();
        ConfirmationEconfirmSender confirmSender = new ConfirmationEconfirmSender();

        if (order.isValid() && repository.save(order)) {
            confirmSender.sendConfirmationMessage(order);
        }
    }

}
```

### <mark style="background-color: #F9FAC0">κ°λ°© νμ‡„ μ›μΉ™(Open Closed Principle)</mark>

**μ†ν”„νΈμ›¨μ–΄ μ—”ν„°ν‹°(ν΄λμ¤, ν΄λμ¤, ν•¨μ λ“±)λ” μμ‹ μ ν™•μ¥μ—λ” μ—΄λ ¤ μμ–΄μ•Ό ν•μ§€λ§ μμ •(μ£Όλ³€μ λ³€ν™”) μ—λ” λ‹«ν€ μμ–΄μ•Ό ν•λ‹¤** .

μƒμ„ ν΄λμ¤ λλ” μΈν„°νμ΄μ¤λ¥Ό μ¤‘κ°„μ— λ‘ μΌλ΅μ¨, μμ‹ μ€ λ³€ν™”μ— λ€ν•΄μ„ νμ‡„μ μ΄μ§€λ§, μΈν„°νμ΄μ¤λ” μ™Έλ¶€μ λ³€ν™”μ— λ€ν•΄ ν™•μ¥μ„ κ°λ°©ν•΄ μ¤„ μ μλ‹¤.

JDBCμ™€ Mybatis, Hibernate λ“± JAVAμ—μ„λ” Stream(input.Out)μ—μ„ μ°Ύμ•„λ³Ό μ μλ‹¤.

μ΄λ” μ‹μ¤ν…μ΄ μ μ—°ν•΄μ•Ό ν•κ³  μ†μ¤ μ½”λ“λ¥Ό λ³€κ²½ν•μ§€ μ•κ³ λ„ λ³€ν™”ν•λ” μ΅°κ±΄μ—μ„ μ‘μ—…ν•  μ μμ–΄μ•Ό ν•¨μ„ μλ―Έν•λ‹¤.

μ£Όλ¬Έμ΄ μ²λ¦¬λκΈ° μ „κ³Ό ν™•μΈ μ΄λ©”μΌμ΄ μ „μ†΅λ ν›„μ— λ‡ κ°€μ§€ μ‘μ—…μ„ μν–‰ν•΄μ•Ό ν•λ‹¤κ³  ν•  λ•,
`OrderProcessor`λ¥Ό λ³€κ²½ν•μ§€ μ•κ³  κ°λ°©ν• νμ‡„ μ›μΉ™μ„μ§€ν‚¤λ©° ν΄λμ¤ μμ²΄λ¥Ό ν™•μ¥ ν•  μ μλ‹¤.

```java
public class OrderProcessorWithPreAndPostProcessing extends OrderProcessor {

    @Override
    public void process(Order order) {
        beforeProcessing();
        super.process(order);
        afterProcessing();
    }

    private void beforeProcessing() {
        //μ£Όλ¬Έ μ²λ¦¬ μ „ μ‘μ—… λ‚΄μ©
    }

    private void afterProcessing() {
        // μ£Όλ¬Έ μ²λ¦¬ ν›„ μ‘μ—… λ‚΄μ©
    }
}
```

### <mark style="background-color: #F9FAC0"> λ¦¬μ¤μ½”ν”„ μΉν™ μ›μΉ™(Liskov Substitution Principle) </mark>

μμ‹ ν΄λμ¤λ” μµμ†ν• μμ‹ μ λ¶€λ¨ ν΄λμ¤μ—μ„ κ°€λ¥ν• ν–‰μ„λ” μν–‰ν•  μ μμ–΄μ•Ό ν•λ‹¤
μ¦‰, μμ‹ ν΄λμ¤λ” μ–Έμ λ‚ λ¶€λ¨ ν΄λμ¤μ μ—­ν• μ„ λ€μ²΄ν•  μ μμ–΄μ•Ό ν•λ‹¤λ” κ²ƒμ„ λ§ν•λ©°, λ¶€λ¨ ν΄λμ¤μ™€ μμ‹ ν΄λμ¤μ ν–‰μ„κ°€ μΌκ΄€λ¨μ„ μλ―Έν•λ‹¤.

μμ‹ ν΄λμ¤κ°€ λ¶€λ¨ ν΄λμ¤λ¥Ό λ€μ²΄ν•κΈ° μ„ν•΄μ„λ” λ¶€λ¨μ κΈ°λ¥μ— λ€ν•΄ μ¤λ²„λΌμ΄λ“ λμ§€ μ•λ„λ΅ ν•λ©΄ λλ‹¤.
μ¦‰, **μμ‹ ν΄λμ¤λ” λ¶€λ¨ ν΄λμ¤μ μ±…μ„μ„ λ¬΄μ‹ν•κ±°λ‚ μ¬μ •μν•μ§€ μ•κ³  ν™•μ¥λ§ μν–‰**ν•λ„λ΅ ν•΄μ•Ό LSPλ¥Ό λ§μ΅±ν•κ² λλ” κ²ƒμ΄λ‹¤.

μ£Όλ¬Έμ μ ν¨μ„±μ„ κ²€μ‚¬ν•κ³ , μ£Όλ¬Έμ— ν¬ν•¨λ λ¨λ“  μƒν’μ μ¬κ³ κ°€ μλ”μ§€ ν™•μΈν•λ” ν΄λμ¤κ°€ μλ‹¤.

`isValid()`: _true_ λλ” _falseλ¥Ό_ λ°ν™ν•λ” λ©”μ„λ“

```java
public class OrderStockValidator {

    public boolean isValid(Order order) {
        for (Item item : order.getItems()) {
            if (!item.isInStock()) {
                return false;
            }
        }

        return true;
    }
}
```

λ‹¤λ¥Έ μλ΅, μΌλ¶€ μ£Όλ¬Έμ€ μ£Όλ¬Έμ— ν¬ν•¨λ λ¨λ“  μƒν’μ μ¬κ³ κ°€ μλ”μ§€, **λ¨λ“  μƒν’μ΄ ν¬μ¥λμ–΄ μλ”μ§€λ¥Ό ν™•μΈ**ν•΄μ•Ό ν•λ‹¤.`OrderStockValidator`ν΄λμ¤λ¥Ό ν™•μ¥ν•μ—¬`OrderStockAndPackValidator`λ¥Ό λ§λ“¤μ—λ‹¤.

```java
public class OrderStockAndPackValidator extends OrderStockValidator {

    @Override
    public boolean isValid(Order order) {
        for (Item item : order.getItems()) {
            if ( !item.isInStock() || !item.isPacked() ){
                throw new IllegalStateException(
                     String.format("%d μ£Όλ¬Έμ΄ μ ν¨ν•μ§€ μ•μµλ‹λ‹¤!", order.getId())
                );
            }
        }

        return true;
    }
}
```

μ—¬κΈ°μ„ Liskov λ€μ²΄ μ›μΉ™μ„ μ„λ°ν•κ²λλ‹¤.

μ™λƒν•λ©΄ μ£Όλ¬Έμ΄ μ ν¨μ„± κ²€μ‚¬μ— μ‹¤ν¨ν•λ©΄ _falseλ¥Ό_ λ°ν™ν•λ” λ€μ‹  μ°λ¦¬ λ©”μ„λ“κ°€ throw new IllegalStateException μ²λ¦¬κ°€ λκΈ° λ•λ¬Έμ΄λ‹¤.
ν΄λΌμ΄μ–ΈνΈλ” _true_ λλ” _false_ λ°ν™ κ°’μ„ κΈ°λ€ν•λ―€λ΅ μ΄λ΅ μΈν•΄ λ°νƒ€μ„ μ¤λ¥κ°€ λ°μƒν•  μ μλ‹¤.

### <mark style="background-color: #F9FAC0"> μΈν„°νμ΄μ¤ λ¶„λ¦¬ μ›μΉ™ (Interface Segregation Principle) </mark>

\**μμ‹ μ΄ μ‚¬μ©ν•μ§€ μ•λ” μΈν„°νμ΄μ¤λ” κµ¬ν„ν•μ§€ λ§μ•„μ•Ό ν•λ‹¤λ” μ„¤κ³„ μ›μΉ™*μ΄λ‹¤.
μ¦‰, ν•λ‚μ κ±°λ€ν• μΈν„°νμ΄μ¤ λ³΄λ‹¤λ” μ—¬λ¬ κ°μ κµ¬μ²΄μ μΈ μΈν„°νμ΄μ¤κ°€ λ‚«λ‹¤
**SRPλ” κ°μ²΄μ λ‹¨μΌ μ±…μ„μ„ λ»ν•λ‹¤λ©΄, ISPλ” μΈν„°νμ΄μ¤μ λ‹¨μΌ μ±…μ„**μ„ μλ―Έν•λ‹¤.

κ²°κ³Όμ μΌλ΅ μΈν„°νμ΄μ¤ λ©”μ„λ“κ°€ λ³€κ²½λλ©΄ ν•΄λ‹Ή λ©”μ„λ“λ¥Ό μ‚¬μ©ν•μ§€ μ•λ” ν΄λΌμ΄μ–ΈνΈλ” λ³€κ²½λμ§€ μ•μ•„μ•Ό ν•λ‹¤.

μλ¥Ό λ“¤μ–΄,

```java
public interface confirmSender {
    void sendConfirmationMessage(Order order);
    void sendPromotionMessage(Customer customer);
}

public interface OrderRepository {
    boolean save(Order order);
    boolean update(Order order);
}
```

μ μμ μ—μ„ `confirmSender` μΈν„°νμ΄μ¤λ” μ£Όλ¬Έμ„ ν™•μΈν•λ” λ©”μ„Έμ§€λ¥Ό μ „μ†΅ν•λ” κΈ°λ¥ `sendConfirmationMessage(Order order)` λ©”μ„λ“ μ™Έμ—λ„ ν”„λ΅λ¨μ… λ©”μ„Έμ§€λ¥Ό μ „μ†΅ν•λ” `sendPromotionMessage(Customer customer)` λ©”μ„λ“λ¥Ό μ¶”κ°€λ΅ κ°€μ§€κ³  μλ‹¤.

`OrderRepository` μΈν„°νμ΄μ¤λ” `save(Order order)` λ©”μ„λ“ μ™Έμ—λ„ `update(Order order)` λ©”μ„λ“λ¥Ό μ¶”κ°€λ΅ κ°€μ§€κ³  μλ‹¤.actions
μ΄λ ‡κ² μΈν„°νμ΄μ¤μ— μ—¬λ¬ κ°μ λ©”μ„λ“κ°€ μ •μλμ–΄ μλ” κ²½μ°, ν΄λΌμ΄μ–ΈνΈκ°€ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•  λ• μμ‹ μ΄ ν•„μ”λ΅ ν•μ§€ μ•λ” λ©”μ„λ“μ— λ€ν• κµ¬ν„μ„ κ°•μ ν•κ² λλ‹¤. μλ¥Ό λ“¤μ–΄, `OrderProcessor` ν΄λμ¤κ°€ `confirmSender`μ™€ `OrderRepository` μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•΄μ•Ό ν•λ‹¤λ©΄, `sendPromotionMessage(Customer customer)` λ©”μ„λ“μ™€ `update(Order order)` λ©”μ„λ“λ„ ν•¨κ» κµ¬ν„ν•΄μ•Ό ν•κ² λλ‹¤. μ΄λ” `OrderProcessor` ν΄λμ¤μ— λ¶ν•„μ”ν• μμ΅΄μ„±μ„ μ¶”κ°€ν•κ² λκ³ , ISPλ¥Ό μ–΄κΈ°λ” κ²ƒμ΄λ‹¤.

ISPλ¥Ό λ”°λ¥΄μ§€ μ•λ” κ²½μ°, μΈν„°νμ΄μ¤μ λ³€κ²½μ΄ ν΄λΌμ΄μ–ΈνΈμ—κ² λ¶ν•„μ”ν• λ³€κ²½μ„ κ°•μ ν•  μ μκ³ , κ²°ν•©λ„λ¥Ό λ†’μ—¬ μ μ§€λ³΄μλ¥Ό μ–΄λ µκ² ν•  μ μμµλ‹λ‹¤. λ”°λΌμ„ ISPλ¥Ό μ§€ν‚¤λ” κ²ƒμ΄ μ¤‘μ”ν•λ©°, μΈν„°νμ΄μ¤λ¥Ό μ‘μ€ λ‹¨μ„λ΅ λ¶„λ¦¬ν•μ—¬ ν΄λΌμ΄μ–ΈνΈκ°€ ν•„μ”λ΅ ν•λ” κΈ°λ¥μ—λ§ μμ΅΄ν•λ„λ΅ ν•λ” κ²ƒμ΄ μΆ‹μµλ‹λ‹¤.

### <mark style="background-color: #F9FAC0">μμ΅΄ μ—­μ „ μ›μΉ™(Dependency Inversion Principle)</mark>

**μ‹μ¤ν… λ‚΄μ μΆ…μ†μ„±μ€ μ¶”μƒν™”λ¥Ό κΈ°λ°μΌλ΅ κµ¬μ¶•λλ‹¤.**. μƒμ„ μμ¤€ ν΄λμ¤λ” ν•μ„ μμ¤€ ν΄λμ¤μ— μμ΅΄ν•μ§€ μ•λ”λ‹¤.

μ¶”μƒν™”λ” μ„Έλ¶€ μ‚¬ν•­μ— μμ΅΄ν•΄μ„λ” μ• λλ‹¤.

μ„Έλ¶€ μ‚¬ν•­μ€ μ¶”μƒν™”μ— λ”°λΌ λ‹¬λΌμ§€κΈ°λ•λ¬Έμ—. λ‹¤μ–‘ν• ν΄λμ¤κ°€ μ¶”μƒν™”λ¥Ό ν†µν•΄ μ„λ΅ μ—°κ²°λλ„λ΅ μ†ν”„νΈμ›¨μ–΄λ¥Ό μ„¤κ³„ν•΄μ•Ό ν•λ‹¤.

μ

```java
public class OrderProcessor {
    public void process(Order order){

        MySQLOrderRepository repository = new MySQLOrderRepository();
        ConfirmationEmailSender mailSender = new ConfirmationEmailSender();

        if (order.isValid() && repository.save(order)) {
            mailSender.sendConfirmationEmail(order);
        }
    }

}
```

`OrderProcessor`ν΄λμ¤λ” λ‘ κ°μ νΉμ • ν΄λμ¤μΈ `MySQLOrderRepository`, `ConfirmationEmailSender`.μ— μμ΅΄ν•λ‹¤.

```java
public class MySQLOrderRepository {
    public boolean save(Order order) {
        MySqlConnection connection = new MySqlConnection("database.url");
        // λ°μ΄ν„° λ² μ΄μ¤μ— μ €μ¥

        return true;
    }
}

public class ConfirmationEmailSender {
    public void sendConfirmationEmail(Order order) {
        String name = order.getCustomerName();
        String email = order.getCustomerEmail();

        // λ©”μΌ μ „μ†΅
    }
}
```

μ΄λ¬ν• ν΄λμ¤λ” μ°λ¦¬κ°€ μ¶”μƒν™”λΌκ³  λ¶€λ¥΄λ” κ²ƒκ³Όλ” κ±°λ¦¬κ°€ λ©€λ‹¤.

μΆ…μ†μ„± μ—­μ „ μ›μΉ™μ κ΄€μ μ—μ„ λ³΄λ©΄ κµ¬μ²΄μ μΈ κµ¬ν„λ³΄λ‹¤λ” μ•μΌλ΅ μ‘μ—…ν•  μ μλ” λ‡ κ°€μ§€ μ¶”μƒν™”λ¥Ό λ§λ“λ” κ²ƒλ¶€ν„° μ‹μ‘ν•λ” κ²ƒμ΄ μΆ‹λ‹¤.

λ‘ κ°μ μΈν„°νμ΄μ¤λ¥Ό λ§λ“¤μ–΄ λ³΄μ. `MailSender`λ° `OrderRepository`

```java
public interface MailSender {
    void sendConfirmationEmail(Order order);
}

public interface OrderRepository {
    boolean save(Order order);
}
```

μ΄μ  μ΄ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•΄λ³΄μ.

```java
public class ConfirmationEmailSender implements MailSender {

    @Override
    public void sendConfirmationEmail(Order order) {
        String name = order.getCustomerName();
        String email = order.getCustomerEmail();

        // μ΄λ©”μΌ μ „μ†΅
    }

}

public class MySQLOrderRepository implements OrderRepository {

    @Override
    public boolean save(Order order) {
        MySqlConnection connection = new MySqlConnection("database.url");
        // λ°μ΄ν„° λ² μ΄μ¤μ— μ €μ¥

        return true;
    }
}
```

`OrderProcessor`ν΄λμ¤κ°€ κµ¬μ²΄μ μΈ κµ¬ν„μ΄ μ•„λ‹λΌ μ¶”μƒν™”μ— μμ΅΄ν•κ² λμ—λ‹¤.

ν΄λμ¤ μƒμ„±μμ— μΆ…μ†μ„±μ„ μ¶”κ°€ν•μ—¬ λ³€κ²½ν•λ‹¤.

```java
public class OrderProcessor {

    private MailSender mailSender;
    private OrderRepository repository;

    public OrderProcessor(MailSender mailSender, OrderRepository repository) {
        this.mailSender = mailSender;
        this.repository = repository;
    }

    public void process(Order order){
        if (order.isValid() && repository.save(order)) {
            mailSender.sendConfirmationEmail(order);
        }
    }
}
```

μ΄μ  OrderProcessor ν΄λμ¤λ” νΉμ • κµ¬ν„μ΄ μ•„λ‹ μ¶”μƒν™”μ— μμ΅΄ν•λ‹¤. κ°μ²΄κ°€ μƒμ„± λ  λ• μ›ν•λ” μΆ…μ†μ„±μ„ μ¶”κ°€ν•μ—¬ λ™μ‘μ„ μ‰½κ² λ³€κ²½ν•  μ μλ‹¤.
